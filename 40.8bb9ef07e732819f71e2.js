"use strict";(self.webpackChunkyemen_market_analysis=self.webpackChunkyemen_market_analysis||[]).push([[40],{91040:(e,t,i)=>{i.r(t),i.d(t,{default:()=>de});var r=i(96540),a=i(5556),n=i.n(a),o=i(87164),l=i(73357),s=i(89502),d=i(33551),c=i(64155),u=i(8239),p=i(86990),m=i(54855),h=i(98821),g=i(4213),y=i(44675),v=i(2896),b=i(15995),f=i(88239),x=i(44653),A=i(37132),Y=i(69107),D=i(77984),k=i(23495),F=i(78687),w=i(97018),M=i(84124),R=i(86279),S=i(29452),q=i(2445);const W=e=>{let{residuals:t,isMobile:i}=e;const a=(0,y.A)(),n=(0,r.useMemo)((()=>{if(null==t||!t.length)return[];const e=t.reduce(((e,t)=>{const i=t.date.split("T")[0];return e[i]||(e[i]={date:i,residuals:[],mean:0,upper:0,lower:0}),e[i].residuals.push(t.residual),e}),{});return Object.values(e).map((e=>{const t=[...e.residuals].sort(((e,t)=>e-t)),i=e.residuals.reduce(((e,t)=>e+t),0)/e.residuals.length,r=t[Math.floor(.25*t.length)],a=t[Math.floor(.75*t.length)],n=Math.sqrt(e.residuals.reduce(((e,t)=>e+Math.pow(t-i,2)),0)/e.residuals.length);return{date:new Date(e.date).toLocaleDateString(),mean:i,upper:a,lower:r,range:a-r,volatility:n}})).sort(((e,t)=>new Date(e.date)-new Date(t.date)))}),[t]),l=(0,r.useMemo)((()=>{if(!n.length)return null;const e=n.map((e=>e.range)),t=e.reduce(((e,t)=>e+t),0)/e.length,i=n.map((e=>e.volatility)),r=i.reduce(((e,t)=>e+t),0)/i.length;return{meanRange:t,meanVolatility:r,volatility:t>2?"high":t>1?"moderate":"low",stability:r<.5?"stable":r<1?"moderately stable":"volatile"}}),[n]);return n.length?(0,q.FD)(c.A,{sx:{p:2,height:"100%"},children:[l&&(0,q.Y)(o.A,{sx:{mb:2},children:(0,q.Y)(d.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:`Markets show ${l.volatility} price dispersion with ${l.stability} dynamics`})}),(0,q.Y)(o.A,{sx:{height:i?"80%":"85%"},children:(0,q.Y)(x.u,{width:"100%",height:"100%",children:(0,q.FD)(A.X,{data:n,margin:{top:10,right:30,left:20,bottom:5},children:[(0,q.Y)(Y.d,{strokeDasharray:"3 3",stroke:a.palette.divider}),(0,q.Y)(D.W,{dataKey:"date",tick:{fill:a.palette.text.secondary,fontSize:12},label:{value:"Analysis Period",position:"insideBottom",offset:-10,fill:a.palette.text.secondary}}),(0,q.Y)(k.h,{tick:{fill:a.palette.text.secondary,fontSize:12},label:{value:"Price Deviation (YER)",angle:-90,position:"insideLeft",offset:15,fill:a.palette.text.secondary}}),(0,q.Y)(F.m,{content:(0,q.Y)((e=>{var t,i,r;let{active:n,payload:l,label:s}=e;if(!n||!l||!l.length)return null;const u=null===(t=l.find((e=>"mean"===e.dataKey)))||void 0===t?void 0:t.value,p=null===(i=l.find((e=>"range"===e.dataKey)))||void 0===i?void 0:i.value,m=null===(r=l.find((e=>"volatility"===e.dataKey)))||void 0===r?void 0:r.value;return void 0===u?null:(0,q.FD)(c.A,{elevation:3,sx:{p:2,maxWidth:250},children:[(0,q.Y)(d.A,{variant:"subtitle2",gutterBottom:!0,children:s}),(0,q.FD)(o.A,{sx:{mt:1},children:[(0,q.FD)(d.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Mean Deviation: ",u.toFixed(4)]}),void 0!==p&&(0,q.FD)(d.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Price Dispersion: ",p.toFixed(4)]}),void 0!==m&&(0,q.FD)(d.A,{variant:"body2",color:"text.secondary",children:["Volatility: ",m.toFixed(4)]})]}),void 0!==p&&(0,q.Y)(d.A,{variant:"caption",sx:{display:"block",mt:1.5,pt:1,borderTop:`1px solid ${a.palette.divider}`,color:a.palette.text.secondary},children:p>2?"High market fragmentation":p>1?"Moderate price differences":"Well-integrated markets"})]})}),{})}),(0,q.Y)(w.s,{verticalAlign:"top",height:36,wrapperStyle:{paddingBottom:"20px"}}),(0,q.Y)(M.G,{type:"monotone",dataKey:"upper",stroke:"none",fill:a.palette.primary.light,fillOpacity:.2,name:"Price Range"}),(0,q.Y)(M.G,{type:"monotone",dataKey:"lower",stroke:"none",fill:a.palette.primary.light,fillOpacity:.2,name:"Price Range"}),(0,q.Y)(R.N,{type:"monotone",dataKey:"mean",stroke:a.palette.primary.main,strokeWidth:2,dot:!1,name:"Mean Deviation"}),(0,q.Y)(R.N,{type:"monotone",dataKey:"range",stroke:a.palette.secondary.main,strokeWidth:2,dot:!1,name:"Market Dispersion"}),(0,q.Y)(R.N,{type:"monotone",dataKey:"volatility",stroke:a.palette.error.main,strokeWidth:2,dot:!1,name:"Price Volatility"}),(0,q.Y)(S.v,{dataKey:"date",height:30,stroke:a.palette.primary.main,fill:a.palette.background.paper,travellerWidth:10})]})})})]}):(0,q.Y)(c.A,{sx:{p:3,textAlign:"center"},children:(0,q.Y)(d.A,{variant:"body1",color:"text.secondary",children:"No price deviation data available for visualization."})})};W.propTypes={residuals:n().arrayOf(n().shape({region_id:n().string.isRequired,date:n().string.isRequired,residual:n().number.isRequired})).isRequired,isMobile:n().bool.isRequired};const C=W,I=e=>{let{results:t,windowWidth:i}=e;const r=(0,y.A)(),a=((0,v.d4)(b.aW),(e,i)=>{const a=((e,i)=>{switch(e){case"spatial_lag":return{label:"Price Spillovers",value:i.toFixed(4),symbol:"ρ",interpretation:`${(100*Math.abs(i)).toFixed(1)}% price transmission`,detail:i>.5?"Strong market integration":i>.2?"Moderate market linkages":"Limited price transmission",significance:t.p_values.spatial_lag_price<.05};case"spatial_correlation":return{label:"Market Clustering",value:i.I.toFixed(4),symbol:"I",interpretation:(Math.abs(i.I)>.3?"Strong":Math.abs(i.I)>.1?"Moderate":"Weak")+" spatial patterns",detail:i.I>0?"Similar prices in neighboring regions":"Distinct local price dynamics",significance:i["p-value"]<.05};case"model_fit":return{label:"Market Integration",value:(100*i).toFixed(1)+"%",symbol:"R²",interpretation:(i>.7?"Strong":i>.3?"Moderate":"Weak")+" explanatory power",detail:i>.5?"Model captures key spatial relationships":"Additional factors influence prices",significance:!0};case"residual_pattern":return{label:"Price Deviations",value:i.toFixed(4),symbol:"σ",interpretation:(i>2?"Large":i>1?"Moderate":"Small")+" price variations",detail:"Standard deviation of regional price differences",significance:i<2*t.mse};default:return null}})(e,i);return(0,q.FD)(o.A,{sx:{p:2,bgcolor:r.palette.background.default,borderRadius:1,height:"100%","&:hover .parameter-info":{opacity:1}},children:[(0,q.FD)(d.A,{variant:"h6",sx:{fontSize:"1.1rem",fontWeight:600},children:[a.symbol," = ",a.value]}),(0,q.Y)(d.A,{variant:"body2",color:"text.secondary",children:a.label}),(0,q.Y)(d.A,{variant:"body2",sx:{mt:1},children:a.interpretation}),(0,q.FD)(d.A,{className:"parameter-info",variant:"caption",sx:{display:"block",mt:1,opacity:0,transition:"opacity 0.2s",color:r.palette.text.secondary},children:[a.detail,a.significance&&(0,q.Y)(o.A,{component:"span",sx:{display:"block",mt:.5,fontStyle:"italic"},children:"Statistically significant pattern"})]})]})}),n=Math.sqrt(t.residual.reduce(((e,t)=>e+Math.pow(t.residual,0)),0)/t.residual.length);return(0,q.FD)(c.A,{sx:{p:2},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"Model Parameters"}),(0,q.FD)(u.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,q.Y)(u.Ay,{item:!0,xs:12,md:3,children:a("spatial_lag",t.coefficients.spatial_lag_price)}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:3,children:a("spatial_correlation",t.moran_i)}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:3,children:a("model_fit",t.r_squared)}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:3,children:a("residual_pattern",n)})]}),(0,q.FD)(o.A,{sx:{mt:4},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,children:"Regional Price Patterns"}),(0,q.Y)(o.A,{sx:{height:400},children:(0,q.Y)(C,{residuals:t.residual,isMobile:i<r.breakpoints.values.sm})})]})]})};I.propTypes={results:n().shape({coefficients:n().shape({spatial_lag_price:n().number}).isRequired,p_values:n().shape({spatial_lag_price:n().number}).isRequired,r_squared:n().number.isRequired,mse:n().number.isRequired,moran_i:n().shape({I:n().number.isRequired,"p-value":n().number.isRequired}).isRequired,residual:n().arrayOf(n().shape({region_id:n().string.isRequired,date:n().string.isRequired,residual:n().number.isRequired})).isRequired}).isRequired,windowWidth:n().number.isRequired};const P=I;var $=i(50779),N=i(54433),z=i(67130),B=i(18740),j=i(66162),O=i(81344),K=i(37660),T=i(25075);const L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e||isNaN(e)?"N/A":Math.abs(e)<.01?e.toExponential(t):e.toFixed(t)},E=(e,t,i)=>{const r=Math.max(Math.abs(e),Math.abs(t)),a=[-r,0,r];return T.Ay.scale([i.palette.error.main,i.palette.grey[300],i.palette.success.main]).domain(a).classes(5)},Z=(e,t)=>{const i=Array.from(e).sort(((e,t)=>e-t)),r=(i.length-1)*t,a=Math.floor(r),n=r-a;return void 0!==i[a+1]?i[a]+n*(i[a+1]-i[a]):i[a]},H=[15.5527,48.5164],V=[[12.5,42.5],[19,54.5]];var G=i(20477),J=i(30362);const X=e=>{let{min:t,max:i,colorScale:r,position:a="bottomright",title:n="Price Deviations"}=e;const l=(0,y.A)(),s=(0,G.A)(l.breakpoints.down("sm")),u=()=>{switch(n.toLowerCase()){case"price deviations":return"Shows how regional prices differ from model predictions. Positive values (red) indicate higher prices than expected, negative values (blue) indicate lower prices.";case"market spillovers":return"Indicates the strength of price transmission between markets. Higher values show stronger market integration, lower values suggest market fragmentation.";default:return"Distribution of values across regions"}};return r&&null!=t&&null!=i?(0,q.Y)(J.A,{title:u(),placement:"left",arrow:!0,children:(0,q.FD)(c.A,{elevation:3,sx:{position:"absolute",...(()=>{const e=s?12:20;switch(a){case"bottomright":default:return{bottom:e,right:e};case"bottomleft":return{bottom:e,left:e};case"topright":return{top:e,right:e};case"topleft":return{top:e,left:e}}})(),p:s?1.5:2,borderRadius:1,zIndex:1e3,minWidth:s?120:180,maxWidth:s?150:220,opacity:.95,transition:l.transitions.create(["opacity","box-shadow"]),"&:hover":{opacity:1,boxShadow:l.shadows[8]}},children:[(0,q.Y)(d.A,{variant:"subtitle2",sx:{fontSize:s?"0.75rem":"0.875rem",fontWeight:600,mb:1,color:l.palette.text.primary},children:n}),(0,q.Y)(o.A,{sx:{width:"100%",height:s?10:12,background:`linear-gradient(to right, \n              ${r(t)}, \n              ${r(t/2)},\n              ${r(0)},\n              ${r(i/2)},\n              ${r(i)}\n            )`,borderRadius:.5,border:`1px solid ${l.palette.divider}`},role:"img","aria-label":`Color scale from ${L(t)} to ${L(i)}`}),(0,q.FD)(o.A,{sx:{display:"flex",justifyContent:"space-between",mt:1,px:.5},children:[(0,q.Y)(d.A,{variant:"caption",sx:{fontSize:s?"0.7rem":"0.75rem",color:l.palette.text.secondary,fontWeight:500},children:L(t)}),(0,q.Y)(d.A,{variant:"caption",sx:{fontSize:s?"0.7rem":"0.75rem",color:l.palette.text.secondary,fontWeight:500},children:"0"}),(0,q.Y)(d.A,{variant:"caption",sx:{fontSize:s?"0.7rem":"0.75rem",color:l.palette.text.secondary,fontWeight:500},children:L(i)})]}),(0,q.Y)(d.A,{variant:"caption",sx:{display:s?"none":"block",mt:1,color:l.palette.text.secondary,fontSize:"0.7rem",opacity:.8,transition:"opacity 0.2s",".MuiPaper-root:hover &":{opacity:1}},children:u().split(".")[0]+"."})]})}):null};X.propTypes={min:n().number.isRequired,max:n().number.isRequired,colorScale:n().func.isRequired,position:n().oneOf(["bottomright","bottomleft","topright","topleft"]),title:n().string};const Q=X,U=e=>{let{results:t,windowWidth:i,mode:a="analysis"}=e;const n=(0,y.A)(),[l,s]=(0,r.useState)(null),[p,m]=(0,r.useState)("residuals"),[h,g]=(0,r.useState)(null),f=(0,v.d4)(b.aW),x=(0,r.useMemo)((()=>{if(null==f||!f.polygons||null==t||!t.residual)return null;try{const e=t.residual.reduce(((e,t)=>(e[t.date]||(e[t.date]={}),e[t.date][t.region_id]=t.residual,e)),{}),i=Object.keys(e).sort();!l&&i.length>0&&s(i[i.length-1]);const r=l?e[l]:{};return{type:"FeatureCollection",features:f.polygons.map((e=>{var i;return{type:"Feature",geometry:e.geometry,properties:{...e.properties,residual:r[e.properties.region_id]||null,spillover:(null===(i=t.spillover_effects)||void 0===i?void 0:i[e.properties.region_id])||0,regime:t.regime||"unified",isSelected:e.properties.region_id===h}}}))}}catch(e){return null}}),[f,t,l,h]),{colorScale:A,minResidual:Y,maxResidual:D}=(0,r.useMemo)((()=>{if(null==t||!t.residual)return{colorScale:null,minResidual:null,maxResidual:null};const e=(e=>{if(!e||0===e.length)return null;const t=e.map((e=>e.residual)).filter((e=>!isNaN(e)));if(0===t.length)return null;const i=_.mean(t),r=Math.sqrt(_.sum(t.map((e=>Math.pow(e-i,2))))/t.length),a=Math.min(...t),n=Math.max(...t),o=.1*(n-a);return{min:a-o,max:n+o,mean:Number(i.toFixed(2)),stdDev:Number(r.toFixed(2)),q1:Number(Z(t,.25).toFixed(2)),q3:Number(Z(t,.75).toFixed(2))}})(l?t.residual.filter((e=>e.date===l)):t.residual);return e?{colorScale:E(e.min,e.max,n),minResidual:e.min,maxResidual:e.max}:{colorScale:null,minResidual:null,maxResidual:null}}),[t,l,n]),k=(0,r.useMemo)((()=>E(Y,D,n)),[Y,D,n]),F=(0,r.useMemo)((()=>x?{...x,features:x.features.map((e=>({...e,properties:{...e.properties,fillColor:null!=e.properties.residual?k(e.properties.residual).hex():n.palette.grey[300]}})))}:null),[x,k,n]);return F&&k?(0,q.FD)(c.A,{sx:{p:2},children:[(0,q.FD)(u.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,q.Y)(u.Ay,{item:!0,xs:12,md:"model"===a?6:12,children:(0,q.FD)($.A,{fullWidth:!0,size:"small",children:[(0,q.Y)(N.A,{children:"Analysis Date"}),(0,q.Y)(z.A,{value:l||"",onChange:e=>s(e.target.value),label:"Analysis Date",children:t.residual.map((e=>e.date)).filter(((e,t,i)=>i.indexOf(e)===t)).sort().map((e=>(0,q.Y)(B.A,{value:e,children:new Date(e).toLocaleDateString()},e)))})]})}),"model"===a&&(0,q.Y)(u.Ay,{item:!0,xs:12,md:6,children:(0,q.FD)($.A,{fullWidth:!0,size:"small",children:[(0,q.Y)(N.A,{children:"Analysis Type"}),(0,q.FD)(z.A,{value:p,onChange:e=>m(e.target.value),label:"Analysis Type",children:[(0,q.Y)(B.A,{value:"residuals",children:"Price Deviations"}),(0,q.Y)(B.A,{value:"spillover",children:"Market Spillovers"})]})]})})]}),(0,q.FD)(o.A,{sx:{height:500,position:"relative",border:`1px solid ${n.palette.divider}`,borderRadius:1,overflow:"hidden",bgcolor:n.palette.background.default},children:[(0,q.FD)(j.W,{center:H,zoom:6,bounds:V,style:{height:"100%",width:"100%"},maxBounds:V,minZoom:5.5,maxZoom:7,zoomControl:!0,dragging:!0,touchZoom:!0,doubleClickZoom:!0,scrollWheelZoom:!1,boxZoom:!0,keyboard:!0,bounceAtZoomLimits:!0,children:[(0,q.Y)(O.e,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:"© OpenStreetMap contributors"}),(0,q.Y)(K.k,{data:F,style:e=>({fillColor:e.properties.fillColor||n.palette.grey[300],weight:e.properties.isSelected?2:1,opacity:1,color:e.properties.isSelected?n.palette.primary.main:n.palette.divider,fillOpacity:.7}),onEachFeature:(e,t)=>{const i=e.properties;t.on({mouseover:()=>g(i.region_id),mouseout:()=>g(null),click:()=>g(i.region_id)}),t.bindTooltip((()=>{const e="model"===a&&"spillover"===p?i.spillover:i.residual;return`\n          <div style="\n            background: ${n.palette.background.paper};\n            padding: 8px;\n            border-radius: 4px;\n            border: 1px solid ${n.palette.divider};\n            font-family: ${n.typography.fontFamily};\n          ">\n            <div style="font-weight: 600; margin-bottom: 4px;">\n              ${i.region_name||i.region_id}\n            </div>\n            <div style="color: ${n.palette.text.secondary};">\n              ${"spillover"===p?"Spillover Effect":"Price Deviation"}: \n              ${function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"residual";if(null==e||isNaN(e))return"N/A";switch(t){case"residual":return e.toFixed(4);case"percentage":return`${(100*e).toFixed(2)}%`;case"price":return e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});default:return e.toString()}}(e)}\n            </div>\n            ${l?`\n              <div style="color: ${n.palette.text.secondary}; margin-top: 4px; font-size: 0.9em;">\n                ${new Date(l).toLocaleDateString()}\n              </div>\n            `:""}\n          </div>\n        `}),{sticky:!0,direction:"auto",className:"custom-tooltip"})}})]}),(0,q.Y)(Q,{min:Y,max:D,colorScale:k,position:"bottomright",title:"spillover"===p?"Market Spillovers":"Price Deviations"})]})]}):(0,q.Y)(c.A,{sx:{p:2},children:(0,q.Y)(d.A,{variant:"body1",color:"text.secondary",children:"Loading map data..."})})};U.propTypes={results:n().shape({residual:n().arrayOf(n().shape({region_id:n().string.isRequired,date:n().string.isRequired,residual:n().number.isRequired})).isRequired,regime:n().string,spillover_effects:n().object}).isRequired,windowWidth:n().number.isRequired,mode:n().oneOf(["analysis","model"])};const ee=U;var te=i(40921),ie=i(48719),re=i(16576),ae=i(11692),ne=i(64146);const oe=e=>{var t,i,a,n;let{selectedData:l}=e;const[s,p]=(0,r.useState)(!1),m=(0,y.A)(),h=((0,v.d4)(b.aW),function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,q.FD)(o.A,{sx:{p:2,bgcolor:m.palette.background.default,borderRadius:1,height:"100%","&:hover .method-info":{opacity:1}},children:[(0,q.Y)(d.A,{variant:"subtitle1",color:"primary",gutterBottom:!0,children:e}),i&&(0,q.Y)(o.A,{sx:{my:2},children:(0,q.Y)(ne.BlockMath,{math:i})}),(0,q.Y)(d.A,{variant:"body2",children:t})]})});return(0,q.FD)(te.A,{expanded:s,onChange:()=>p(!s),sx:{mb:3},children:[(0,q.Y)(ie.A,{expandIcon:(0,q.Y)(ae.A,{}),sx:{backgroundColor:m.palette.grey[50],"&:hover":{backgroundColor:m.palette.grey[100]}},children:(0,q.Y)(d.A,{variant:"h6",children:"Spatial Market Integration Model Framework"})}),(0,q.Y)(re.A,{sx:{p:3},children:(0,q.FD)(o.A,{sx:{"& .katex":{fontSize:"1.3em"}},children:[(0,q.FD)(c.A,{sx:{p:2,mb:3},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,children:"Market Integration Model"}),(0,q.Y)(o.A,{sx:{my:3},children:(0,q.Y)(ne.BlockMath,{math:"P_i = \\alpha + \\rho(WP)_i + \\gamma CI_i + \\epsilon_i"})}),(0,q.FD)(d.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Where ",(0,q.Y)(ne.InlineMath,{math:"P_i"})," is the price in region i, ",(0,q.Y)(ne.InlineMath,{math:"(WP)_i"})," represents neighboring prices,",(0,q.Y)(ne.InlineMath,{math:"CI_i"})," is conflict intensity, and ",(0,q.Y)(ne.InlineMath,{math:"\\epsilon_i"})," captures unexplained variations."]})]}),(0,q.FD)(u.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:h("Spatial Weights Matrix","Defines market connectivity based on geographical proximity and trade routes.","W_{ij} = \\begin{cases} \n                  1 & \\text{if } j \\text{ is connected to } i \\\\\n                  0 & \\text{otherwise}\n                \\end{cases}")}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:h("Price Spillovers","Measures how price changes in one market affect neighboring regions.","(WP)_i = \\sum_{j=1}^n W_{ij}P_j")}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:h("Conflict Impact","Incorporates conflict intensity's effect on market connections.","CI_i = f(\\text{events}, \\text{intensity}, \\text{duration})")})]}),(0,q.FD)(c.A,{sx:{p:2,mb:3,bgcolor:m.palette.grey[50]},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,children:"Key Parameters"}),(0,q.FD)(u.Ay,{container:!0,spacing:2,children:[(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:(0,q.FD)(o.A,{sx:{p:2,bgcolor:"background.paper",borderRadius:1},children:[(0,q.FD)(d.A,{variant:"subtitle1",color:"primary",children:["ρ = ",(null==l||null===(t=l.coefficients)||void 0===t||null===(t=t.spatial_lag_price)||void 0===t?void 0:t.toFixed(4))||"N/A"]}),(0,q.Y)(d.A,{variant:"body2",children:"Spatial dependence coefficient measuring market integration strength"})]})}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:(0,q.FD)(o.A,{sx:{p:2,bgcolor:"background.paper",borderRadius:1},children:[(0,q.FD)(d.A,{variant:"subtitle1",color:"primary",children:["I = ",(null==l||null===(i=l.moran_i)||void 0===i||null===(i=i.I)||void 0===i?void 0:i.toFixed(4))||"N/A"]}),(0,q.Y)(d.A,{variant:"body2",children:"Moran's I indicating spatial price clustering patterns"})]})}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:4,children:(0,q.FD)(o.A,{sx:{p:2,bgcolor:"background.paper",borderRadius:1},children:[(0,q.FD)(d.A,{variant:"subtitle1",color:"primary",children:["γ = ",(null==l||null===(a=l.coefficients)||void 0===a||null===(a=a.conflict_intensity)||void 0===a?void 0:a.toFixed(4))||"N/A"]}),(0,q.Y)(d.A,{variant:"body2",children:"Conflict impact coefficient on price dynamics"})]})})]})]}),(0,q.FD)(c.A,{sx:{p:2,bgcolor:m.palette.grey[50]},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,children:"Technical Details"}),(0,q.FD)(u.Ay,{container:!0,spacing:2,children:[(0,q.Y)(u.Ay,{item:!0,xs:12,md:6,children:(0,q.FD)(d.A,{variant:"body2",paragraph:!0,children:["• Seasonal adjustment removes cyclical patterns",(0,q.Y)("br",{}),"• Robust to heteroskedasticity in conflict zones",(0,q.Y)("br",{}),"• Controls for spatial autocorrelation bias"]})}),(0,q.Y)(u.Ay,{item:!0,xs:12,md:6,children:(0,q.FD)(d.A,{variant:"body2",paragraph:!0,children:["• Ridge regression handles multicollinearity",(0,q.Y)("br",{}),"• Spatial error correction for local shocks",(0,q.Y)("br",{}),"• MSE: ",(null==l||null===(n=l.mse)||void 0===n?void 0:n.toFixed(4))||"N/A"," (model precision)"]})})]})]})]})})]})};oe.propTypes={selectedData:n().shape({coefficients:n().shape({spatial_lag_price:n().number,conflict_intensity:n().number}),moran_i:n().shape({I:n().number}),mse:n().number}).isRequired};const le=oe,se=e=>{let{selectedCommodity:t,windowWidth:i}=e;(0,y.A)();const a=(0,v.wA)(),n=(0,v.d4)(b.aW),[x,A]=(0,r.useState)({open:!1,message:"",severity:"info"});r.useEffect((()=>{a((0,f.KY)({selectedCommodity:t}))}),[t,a]);const Y=r.useMemo((()=>{var e,t,i;const r=null==n?void 0:n.regressionAnalysis;return r&&null!==(e=r.residuals)&&void 0!==e&&null!==(e=e.raw)&&void 0!==e&&e.length?{coefficients:r.model.coefficients||{},intercept:r.model.intercept||0,p_values:r.model.p_values||{},moran_i:r.spatial.moran_i||{I:0,"p-value":1},residual:r.residuals.raw,r_squared:r.model.r_squared||0,adj_r_squared:r.model.adj_r_squared||0,mse:r.model.mse||0,observations:r.model.observations||0,regime:(null===(t=r.metadata)||void 0===t?void 0:t.regime)||"unified",timestamp:null===(i=r.metadata)||void 0===i?void 0:i.timestamp}:null}),[n]),D=(0,r.useCallback)((()=>{if(Y)try{const e=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"});(0,g.saveAs)(e,`spatial_analysis_${t||"beans_kidney_red"}.json`),A({open:!0,message:"Data downloaded successfully",severity:"success"})}catch(e){A({open:!0,message:"Failed to download data",severity:"error"})}}),[Y,t]);return Y?null!=n&&n.error?(0,q.FD)(s.A,{severity:"error",sx:{mb:3},children:[(0,q.Y)(d.A,{variant:"subtitle1",gutterBottom:!0,children:"Error Loading Data"}),n.error]}):(0,q.FD)(o.A,{sx:{width:"100%",mb:4,bgcolor:"background.paper"},children:[(0,q.Y)(c.A,{sx:{p:2,mb:3},children:(0,q.Y)(u.Ay,{container:!0,spacing:2,alignItems:"center",justifyContent:"flex-end",children:(0,q.Y)(u.Ay,{item:!0,xs:12,md:3,children:(0,q.Y)(p.A,{fullWidth:!0,variant:"contained",startIcon:(0,q.Y)(h.A,{}),onClick:D,children:"Download Results"})})})}),(0,q.Y)(o.A,{sx:{mb:3},children:(0,q.Y)(le,{selectedData:Y})}),(0,q.Y)(o.A,{sx:{mb:3},children:(0,q.Y)(P,{results:Y,windowWidth:i})}),(0,q.FD)(o.A,{sx:{mb:3},children:[(0,q.Y)(d.A,{variant:"h6",gutterBottom:!0,sx:{mb:2},children:"Regional Price Patterns"}),(0,q.Y)(ee,{results:Y,windowWidth:i})]}),(0,q.Y)(m.A,{open:x.open,autoHideDuration:6e3,onClose:()=>A((e=>({...e,open:!1}))),message:x.message,severity:x.severity})]}):(0,q.Y)(o.A,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,q.Y)(l.A,{})})};se.propTypes={selectedCommodity:n().string.isRequired,windowWidth:n().number.isRequired};const de=se}}]);